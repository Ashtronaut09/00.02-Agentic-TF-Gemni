provider "aws" {
  region = "us-east-1"
}

resource "aws_resourcegroups_group" "main" {
  name = "agentic-tf-gemini-rg"

  resource_query {
    query = <<JSON
{
  "ResourceTypeFilters": [
    "AWS::AllSupported"
  ],
  "TagFilters": [
    {
      "Key": "project",
      "Values": ["agentic-tf-gemini"]
    }
  ]
}
JSON
  }
}

resource "aws_s3_bucket" "b" {
  bucket = "my-tf-test-bucket-12345"

  tags = {
    Name    = "My bucket"
    project = "agentic-tf-gemini"
  }
}

resource "aws_s3_bucket_acl" "b_acl" {
  bucket = aws_s3_bucket.b.id
  acl    = "private"
}